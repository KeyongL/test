# 🚀 问卷模板快速复用指南

## 📋 概述

这是一个**可复用的问卷系统模板**。每次只需要修改配置文件，即可快速生成新的问卷并部署上线。

**适用场景**：
- 需要做新的问卷调研
- 需要修改现有问卷内容
- 需要快速部署在线问卷

---

## ⚡ 3步快速复用流程

### 步骤 1：修改配置文件（3分钟）

只需要修改 **`survey_config.json`** 这一个文件：

```json
{
    "app_config": {
        "title": "你的问卷标题",
        "icon": "📚",
        "password": "你的后台密码"
    },
    "questions": [
        {
            "id": "question1",
            "text": "1. 你的第一个问题？",
            "type": "single",
            "options": ["选项A", "选项B", "选项C"]
        },
        {
            "id": "question2",
            "text": "2. 你的第二个问题？（可多选）",
            "type": "multi",
            "options": ["选项1", "选项2", "选项3"]
        }
    ]
}
```

**配置说明**：
- `app_config.title`: 问卷标题（会显示在网页上）
- `app_config.password`: 后台查看数据的密码
- `questions`: 问题列表
  - `id`: 问题唯一标识（英文，不能重复）
  - `text`: 问题文本
  - `type`: `"single"` 单选 或 `"multi"` 多选
  - `options`: 选项数组

**特殊功能**：
- 如果想支持"其它"选项，在选项数组中添加 `"其它：______"`，系统会自动显示文本输入框

---

### 步骤 2：本地测试（可选，2分钟）

```bash
# 确保在项目目录
cd survay_robat

# 安装依赖（如果还没安装）
pip install -r requirements.txt

# 启动本地测试
streamlit run app.py
```

访问 `http://localhost:8501` 测试问卷功能。

---

### 步骤 3：推送到 GitHub 并自动部署（1分钟）

```bash
# 提交更改
git add survey_config.json
git commit -m "Update survey questions"
git push origin main
```

**如果已经在 Streamlit Cloud 部署过**：
- 代码推送后，Streamlit Cloud 会自动重新部署（等待 1-2 分钟）
- 刷新网页即可看到新问卷

**如果是第一次部署**：
- 访问：https://share.streamlit.io/
- 用 GitHub 登录
- 点击 "New app"
- 选择仓库：`KeyongL/test`（或你的仓库）
- Main file path: `app.py`
- 点击 "Deploy"

---

## 📝 配置文件完整示例

### 单选题示例

```json
{
    "id": "age_range",
    "text": "您的年龄段是？",
    "type": "single",
    "options": [
        "18-25岁",
        "26-35岁",
        "36-45岁",
        "46岁以上"
    ]
}
```

### 多选题示例

```json
{
    "id": "interests",
    "text": "您对以下哪些话题感兴趣？（可多选）",
    "type": "multi",
    "options": [
        "科技",
        "教育",
        "健康",
        "娱乐"
    ]
}
```

### 支持"其它"选项

```json
{
    "id": "feedback",
    "text": "您还有什么建议？",
    "type": "single",
    "options": [
        "非常好",
        "一般",
        "需要改进",
        "其它：______"
    ]
}
```

选择"其它：______"后，系统会自动显示文本输入框，填写的内容会保存到数据库。

---

## 🎯 常见问题

### Q1: 如何修改问卷标题？

修改 `survey_config.json` 中的 `app_config.title`，然后 push 到 GitHub。

### Q2: 如何添加新问题？

在 `questions` 数组中添加新的问题对象，确保 `id` 不重复。

### Q3: 如何修改后台密码？

修改 `survey_config.json` 中的 `app_config.password`，然后 push 到 GitHub。

### Q4: 如何查看收集的数据？

1. 打开部署的问卷网站
2. 左侧选择 "📊 查看数据"
3. 输入密码
4. 可以查看统计、导出 CSV、删除无效数据

### Q5: 如何删除无效数据？

1. 进入"查看数据"页面
2. 点击 "🗑️ 删除模式"
3. 勾选要删除的记录
4. 点击 "⚠️ 确认删除选中记录"

### Q6: 数据库在哪里？

- **本地**：项目目录下的 `survey_data.db`
- **线上**：Streamlit Cloud 的临时存储（建议定期导出 CSV 备份）

---

## 📊 功能清单

✅ 支持单选题和多选题  
✅ 支持"其它"文本输入  
✅ 数据自动保存到数据库  
✅ 实时统计图表  
✅ 数据导出 CSV  
✅ 删除无效数据  
✅ 密码保护后台  
✅ 一键部署上线  

---

## 🔄 完整工作流程示例

**场景**：要做一个"用户满意度调研"

### 1. 修改配置（3分钟）

打开 `survey_config.json`，修改为：

```json
{
    "app_config": {
        "title": "用户满意度调研",
        "icon": "⭐",
        "password": "satisfaction2024"
    },
    "questions": [
        {
            "id": "satisfaction",
            "text": "1. 您对产品的整体满意度？",
            "type": "single",
            "options": ["非常满意", "满意", "一般", "不满意", "非常不满意"]
        },
        {
            "id": "features",
            "text": "2. 您最喜欢哪些功能？（可多选）",
            "type": "multi",
            "options": ["界面设计", "功能丰富", "性能稳定", "客服支持", "其它：______"]
        },
        {
            "id": "suggestions",
            "text": "3. 您有什么改进建议？",
            "type": "single",
            "options": ["暂无", "其它：______"]
        }
    ]
}
```

### 2. 本地测试（可选）

```bash
streamlit run app.py
```

测试确认无误。

### 3. 部署上线

```bash
git add survey_config.json
git commit -m "Add user satisfaction survey"
git push origin main
```

等待 1-2 分钟，访问 Streamlit Cloud 链接即可看到新问卷！

---

## 💡 最佳实践

1. **问题 ID 命名规范**：使用英文、小写、下划线，如 `user_age`, `product_satisfaction`
2. **定期备份数据**：从后台导出 CSV 文件保存
3. **测试后再部署**：本地测试确认无误后再 push
4. **密码安全**：使用复杂密码保护后台数据

---

## 📞 需要帮助？

如果遇到问题：
1. 检查 `survey_config.json` 格式是否正确（JSON 格式）
2. 确保所有问题都有 `id`, `text`, `type`, `options`
3. 检查 GitHub 是否成功推送
4. Streamlit Cloud 日志查看错误信息

---

**最后更新**：2024年
